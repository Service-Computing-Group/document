# 项目总结

## 个人信息

姓名 - 郭佳俊  
学号 - 17343034  

## 项目要求

复制 https://swapi.co/ 网站

- 你需要想办法获取该网站所有资源与数据
- 给出 UI 帮助客户根据明星查看相关内容

## 个人负责内容

参与后端实现

## 遇到的问题

- 构建数据库
    - 利用 [leejarvis/swapi](https://github.com/leejarvis/swapi) 库从 swapi.co 获取数据时，发现数据的 id 并不是连续的，而且有些类的数据的 id 似乎没有什么规律，能明确知道的只有类中数据的总数目。所以最后我是人工找出 id 的最大值，然后写一个 id 从 1 到最大值的循环，根据 id 获取数据。另外要注意 leejarvis/swapi 库提供的获取数据的方法，在不存在对应 id 的数据时，仍然会返回一个变量全为空的结构体，所以在将数据加入到数据库前要先判断结构体的某个变量值是否为空，例如判断 name 是否为空，来判断是否存在这个 id 的数据。
    - 为了避免因为频繁访问 swapi.co 导致请求出错，在获取数据时可以适当 sleep 一下
    - 可以安装 [haset/bolter](https://github.com/hasit/bolter) 在命令行查看 .db 数据库的内容
- 返回 404 的方法
    处理请求时发现数据不存在时，调用 ``w.WriteHeader(http.StatusNotFound)``

## 总结感想
我主要的工作还是在构建数据库上。实验中有许多类似的方法和 api，同样负责后端的另一个同学写好一个方法和 api 之后，由我稍作修改以创建其他类似的方法和 api。在实验的过程中，学习了 boltdb 的使用，bolter 等工具的使用，巩固了使用 negroni+mux+render 搭建服务器的方法。